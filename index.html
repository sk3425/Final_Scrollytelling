<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8' />
  <title>Mapbox Storytelling</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <link rel="stylesheet" href="https://api.tiles.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.css" />
  <link rel="stylesheet" href="styles.css">
  <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mapbox-gl-globe-minimap@1.2.0/dist/bundle.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://unpkg.com/scrollama"></script>
</head>
<body>
  <!-- MAP BACKGROUND -->
  <div id="map"></div>
  
  <!-- PERSISTENT GRAPH BACKDROP -->
  <div id="persistent-graph-container">
    <div id="graph-inner"></div>
  </div>
  
  <!-- SCROLLYTELLING CHAPTERS -->
  <div id="story"></div>

  <video id="queensVideo" muted loop playsinline style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;"></video>

  chapterDiv: '<div style="position: relative; width: 100%; height: 100vh; overflow: hidden;">' +
    '<video id="queensVideo" loop playsinline style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">' +
    '<source src="Images/Queens.mp4" type="video/mp4">' +
    'Your browser does not support the video tag.' +
    '</video>' +
    '<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3);"></div>' +
    '<div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white;">' +
    '<h2 style="font-size: 2.5rem; margin-bottom: 1rem;">Climate Justice for Queens</h2>' +
    '<p style="font-size: 1.2rem; max-width: 600px;">Without federal funding, these communities will continue to face increasing flood risks.</p>' +
    '</div>' +
    '</div>'
  
  <!-- CLOUDBURST OVERLAY - Just one instance with correct styling -->
  <!-- <div id="cloudburstOverlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; opacity: 0; transition: opacity 1.5s ease; pointer-events: none;">
    <img src="Images/Cloudburst Section.png" alt="Cloudburst Section" style="width: 100%; height: 100%; object-fit: cover;">
  </div> -->
  
  <!-- SCRIPTS -->
  <script src="config.js"></script>
  <script src="map.js"></script>
</body>
</html>